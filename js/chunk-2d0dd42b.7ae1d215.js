(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd42b"],{8140:function(s,t,a){"use strict";a.r(t);var l=function(){var s=this,t=s.$createElement;s._self._c;return s._m(0)},e=[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"vc-snippet-doc"},[a("h1",[s._v("vuex-module-decorators")]),a("p",[a("code",[s._v("Usage Guide Detailed Guide: https://championswimmer.in/vuex-module-decorators/")])]),a("p",[s._v("使用指南详细指南:"),a("code",[s._v("https://championswimmer.in/vuex-module-decorators/")])]),a("p",[a("code",[s._v("Typescript/ES7 Decorators to make Vuex modules a breeze")])]),a("p",[a("code",[s._v("Typescript/ES7")]),s._v("装饰器，让"),a("code",[s._v("Vuex")]),s._v("模块变得轻而易举")]),a("p",[s._v("安装"),a("code",[s._v("Installation")])]),a("p",[a("code",[s._v("npm install -D vuex-module-decorators")])]),a("p",[a("code",[s._v("Babel 6/7")])]),a("div",{staticClass:"tip"},[a("p",[s._v("NOTE This is not necessary for vue-cli@3 projects, since @vue/babel-preset-app already includes this plugin")])]),a("p",[s._v("说明这不是必要的"),a("code",[s._v("vue-cli@3")]),s._v("项目，因为"),a("code",[s._v("@vue/babel-preset-ap")]),s._v("p已经包括这个插件")]),a("p",[a("code",[s._v("You need to install babel-plugin-transform-decorators")])]),a("p",[s._v("你需要安装"),a("code",[s._v("babel-plugin-transform-decorator")])]),a("p",[s._v("TypeScript")]),a("p",[a("code",[s._v("set experimentalDecorators to true")]),s._v(" 设置"),a("code",[s._v("experimentalDecorators")]),s._v("为真")]),a("p",[a("code",[s._v("For reduced code with decorators, set importHelpers: true in tsconfig.json")]),s._v("-对于带有装饰器的简化代码，在"),a("code",[s._v("tsconfig.json")]),s._v("中设置"),a("code",[s._v("importHelpers: true")])]),a("p",[a("code",[s._v("(only for TypeScript 2) set emitHelpers: true in tsconfig.json")]),s._v("-(仅针对"),a("code",[s._v("TypeScript 2")]),s._v(")在"),a("code",[s._v("tsconfig.json")]),s._v("中设置"),a("code",[s._v("emitHelpers: true")])]),a("p",[a("code",[s._v("Configuration")]),s._v("配置")]),a("p",[a("code",[s._v("Using with target: es5")]),s._v("-与目标一起使用:es5")]),a("p",[a("code",[s._v("NOTE Since version 0.9.3 we distribute as ES5, so this section is applicable only to v0.9.2 and below")])]),a("p",[s._v("注:由于"),a("code",[s._v("0.9.3")]),s._v("版本是作为ES5发布的，所以本节只适用于"),a("code",[s._v("v0.9.2")]),s._v("及以下版本")]),a("p",[a("code",[s._v("This package generates code in es2015 format. If your Vue project targets ES6 or ES2015 then you need not do anything. But in case your project uses es5 target (to support old browsers), then you need to tell Vue CLI / Babel to transpile this package.")])]),a("p",[s._v("这个包生成"),a("code",[s._v("es2015")]),s._v("格式的代码。如果您的"),a("code",[s._v("Vue")]),s._v("项目针对"),a("code",[s._v("ES6")]),s._v("或"),a("code",[s._v("ES2015")]),s._v("，那么您不需要做任何事情。但如果您的项目使用"),a("code",[s._v("es5")]),s._v("目标(以支持旧浏览器)，那么您需要告诉"),a("code",[s._v("Vue CLI / Babel")]),s._v("来编译这个包。")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// in your vue.config.js")]),s._v("\n"),a("span",{staticClass:"hljs-variable language_"},[s._v("module")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("exports")]),s._v(" = {\n  "),a("span",{staticClass:"hljs-comment"},[s._v("/* ... other settings */")]),s._v("\n  "),a("span",{staticClass:"hljs-attr"},[s._v("transpileDependencies")]),s._v(": ["),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("]\n}\n\n"),a("span",{staticClass:"hljs-title class_"},[s._v("Usage")]),s._v("\n\n"),a("span",{staticClass:"hljs-title class_"},[s._v("The")]),s._v(" conventional old & boring way\n"),a("span",{staticClass:"hljs-title class_"},[s._v("Remember")]),s._v(" how vuex modules used to be made ?\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" moduleA = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": { ... },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": { ... },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("actions")]),s._v(": { ... },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("getters")]),s._v(": { ... }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" moduleB = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": { ... },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": { ... },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("actions")]),s._v(": { ... }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("a")]),s._v(": moduleA,\n    "),a("span",{staticClass:"hljs-attr"},[s._v("b")]),s._v(": moduleB\n  }\n})\n")])]),a("p",[a("code",[s._v("Hello Decorators !")])]),a("p",[a("code",[s._v("Well not anymore. Now you get better syntax. Inspired by vue-class-component")])]),a("p",[s._v("现在不是了。现在你得到了更好的语法。灵感来自"),a("code",[s._v("vue-class-component")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Counter2")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  count = "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("increment")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("delta: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("count")]),s._v(" += delta\n  }\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("decrement")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("delta: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("count")]),s._v(" -= delta\n  }\n\n  "),a("span",{staticClass:"hljs-comment"},[s._v("// action 'incr' commits mutation 'increment' when done with return value as payload")]),s._v("\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("commit")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'increment'")]),s._v(" })\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("incr")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("5")]),s._v("\n  }\n  "),a("span",{staticClass:"hljs-comment"},[s._v("// action 'decr' commits mutation 'decrement' when done with return value as payload")]),s._v("\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("commit")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'decrement'")]),s._v(" })\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("decr")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("5")]),s._v("\n  }\n}\n")])]),a("p",[a("code",[s._v("async MutationAction === magic")])]),a("p",[a("code",[s._v("Want to see something even better ?")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("MutationAction")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("ConferencesEntity")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("EventsEntity")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@/models/definitions'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("HGAPIModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("conferences")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("Array")]),s._v("<"),a("span",{staticClass:"hljs-title class_"},[s._v("ConferencesEntity")]),s._v("> = []\n  "),a("span",{staticClass:"hljs-attr"},[s._v("events")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("Array")]),s._v("<"),a("span",{staticClass:"hljs-title class_"},[s._v("EventsEntity")]),s._v("> = []\n\n  "),a("span",{staticClass:"hljs-comment"},[s._v("// 'events' and 'conferences' are replaced by returned object")]),s._v("\n  "),a("span",{staticClass:"hljs-comment"},[s._v("// whose shape must be `{events: [...], conferences: [...] }`")]),s._v("\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("MutationAction")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("mutate")]),s._v(": ["),a("span",{staticClass:"hljs-string"},[s._v("'events'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'conferences'")]),s._v("] })\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("fetchAll")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("response")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("Response")]),s._v(" = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("getJSON")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'https://hasgeek.github.io/events/api/events.json'")]),s._v(")\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" response\n  }\n}\n\n"),a("span",{staticClass:"hljs-title class_"},[s._v("Automatic")]),s._v(" getter detection\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("incrWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("extra")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" += extra\n  }\n\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("axles")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n\n这是等价的\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("module")]),s._v(" = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": { "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(" },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-title function_"},[s._v("incrWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state, extra")]),s._v(") {\n      state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" += extra\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("getters")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("axles")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state")]),s._v(") =>")]),s._v(" state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n")])]),a("p",[a("code",[s._v("Putting into the store")])]),a("p",[s._v("放进"),a("code",[s._v("store")])]),a("p",[a("code",[s._v("Use the modules just like you would earlier")])]),a("p",[s._v("像以前一样使用模块")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vue")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'nativescript-vue'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v(", { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" counter "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./modules/Counter2'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" hgapi "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./modules/HGAPIModule'")]),s._v("\n\n"),a("span",{staticClass:"hljs-title class_"},[s._v("Vue")]),s._v("."),a("span",{staticClass:"hljs-title function_"},[s._v("use")]),s._v("("),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v(")\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {},\n  "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n    counter,\n    hgapi\n  }\n})\n")])]),a("p",[s._v("模块重用，与"),a("code",[s._v("NuxtJS")]),s._v("一起使用")]),a("p",[s._v("如果你需要支持模块重用或者在"),a("code",[s._v("NuxtJS")]),s._v("中使用模块，你可以使用"),a("code",[s._v("@Module")]),s._v("的"),a("code",[s._v("stateFactory")]),s._v("选项来生成一个状态工厂函数，而不是一个静态状态对象实例，如下所示:")]),a("p",[a("code",[s._v("Module re-use, use with NuxtJS")])]),a("p",[a("code",[s._v("If you need to support module reuse or to use modules with NuxtJS, you can have a state factory function generated instead of a static state object instance by using stateFactory option to @Module, like so:")])]),a("pre",{staticClass:"hljs"},[a("code",[s._v("@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("stateFactory")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("incrWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("extra")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" += extra\n  }\n\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("axles")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v(" is turned into the equivalent\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("module")]),s._v(" = {\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("state")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" { "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(" }\n  },\n\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-title function_"},[s._v("incrWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state, extra")]),s._v(") {\n      state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" += extra\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("getters")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("axles")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state")]),s._v(") =>")]),s._v(" state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n")])]),a("p",[a("code",[s._v("Dynamic Modules")])]),a("p",[a("code",[s._v("Vuex allows us to register modules into store at runtime after store is constructed. We can do the following to create dynamic modules")])]),a("p",[s._v("动态模块")]),a("p",[a("code",[s._v("Vuex")]),s._v("允许我们在"),a("code",[s._v("store")]),s._v("构建完成后在运行时将模块注册到"),a("code",[s._v("store")]),s._v("中。我们可以执行以下操作来创建动态模块")]),a("pre",{staticClass:"hljs"},[a("code",[s._v("interface "),a("span",{staticClass:"hljs-title class_"},[s._v("StoreType")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mm")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v("\n}\n"),a("span",{staticClass:"hljs-comment"},[s._v("// Declare empty store first")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("Store")]),s._v("<"),a("span",{staticClass:"hljs-title class_"},[s._v("StoreType")]),s._v(">({})\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// Create module later in your code (it will register itself automatically)")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// In the decorator we pass the store object into which module is injected")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// "),a("span",{staticClass:"hljs-doctag"},[s._v("NOTE:")]),s._v(" When you set dynamic true, make sure you give module a name")]),s._v("\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("dynamic")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("store")]),s._v(": store, "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  count = "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("incrCount")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("delta")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("count")]),s._v(" += delta\n  }\n}\n")])]),a("p",[s._v("如果你想保存状态，例如从"),a("code",[s._v("vuex-persist")]),s._v("加载状态时")]),a("p",[a("code",[s._v("If you would like to preserve the state e.g when loading in the state from vuex-persist")])]),a("p",[s._v("或者当它没有初始状态时，你从"),a("code",[s._v("localStorage")]),s._v("加载状态")]),a("pre",{staticClass:"hljs"},[a("code",[s._v("...\n\n-- @"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("dynamic")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("store")]),s._v(": store, "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v(" })\n++ @"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("dynamic")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("store")]),s._v(": store, "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("preserveState")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n\n...\n"),a("span",{staticClass:"hljs-title class_"},[s._v("Or")]),s._v(" when it doesn"),a("span",{staticClass:"hljs-string"},[s._v("'t have a initial state and you load the state from the localStorage\n\n...\n\n-- @Module({ dynamic: true, store: store, name: '")]),s._v("mm"),a("span",{staticClass:"hljs-string"},[s._v("' })\n++ @Module({ dynamic: true, store: store, name: '")]),s._v("mm"),a("span",{staticClass:"hljs-string"},[s._v("', preserveState: localStorage.getItem('")]),s._v("vuex"),a("span",{staticClass:"hljs-string"},[s._v("') !== null })\nclass MyModule extends VuexModule {\n\n...\n")])])]),a("p",[s._v("使用"),a("code",[s._v("NuxtJS")]),s._v("访问模块")]),a("p",[s._v("构建模块有许多可能的方法。这里有一种与"),a("code",[s._v("NuxtJS")]),s._v("一起使用的方法(你只需要将你的模块添加到"),a("code",[s._v("~/utils/store-accessor.ts ")]),s._v("中，然后直接从"),a("code",[s._v("~/store")]),s._v("导入模块):")]),a("p",[a("code",[s._v("Accessing modules with NuxtJS")])]),a("p",[a("code",[s._v("There are many possible ways to construct your modules. Here is one way for drop-in use with NuxtJS (you simply need to add your modules to ~/utils/store-accessor.ts and then just import the modules from ~/store):")])]),a("pre",{staticClass:"hljs"},[a("code",[s._v("~"),a("span",{staticClass:"hljs-regexp"},[s._v("/store/i")]),s._v("ndex."),a("span",{staticClass:"hljs-property"},[s._v("ts")]),s._v(":\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { initialiseStores } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/utils/store-accessor'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("initializer")]),s._v(" = ("),a("span",{staticClass:"hljs-params"},[s._v("store: Store<any>")]),s._v(") => "),a("span",{staticClass:"hljs-title function_"},[s._v("initialiseStores")]),s._v("(store)\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" plugins = [initializer]\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" * "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/utils/store-accessor'")]),s._v("\n\n~"),a("span",{staticClass:"hljs-regexp"},[s._v("/utils/")]),s._v("store-accessor."),a("span",{staticClass:"hljs-property"},[s._v("ts")]),s._v(":\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { getModule } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" example "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store/example'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("exampleStore")]),s._v(": example\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("initialiseStores")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("store: Store<any>")]),s._v("): "),a("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" {\n  exampleStore = "),a("span",{staticClass:"hljs-title function_"},[s._v("getModule")]),s._v("(example, store)\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" { initialiseStores, exampleStore }\n")])]),a("p",[s._v("现在，您可以以类型安全的方式访问存储，只需在组件或页面中执行以下操作—不需要额外的初始化。")]),a("p",[a("code",[s._v("Now you can access stores in a type-safe way by doing the following from a component or page - no extra initialization required.")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { exampleStore } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store'")]),s._v("\n...\n"),a("span",{staticClass:"hljs-title function_"},[s._v("someMethod")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" exampleStore."),a("span",{staticClass:"hljs-property"},[s._v("exampleGetter")]),s._v("\n}\n")])]),a("p",[s._v("使用"),a("code",[s._v("ServerSideRender")]),s._v("装饰器")]),a("p",[s._v("当涉及到"),a("code",[s._v("SSR")]),s._v("时，存储将在每个请求上重新创建。每次使用"),a("code",[s._v("getModule")]),s._v("函数访问模块时，必须提供当前的"),a("code",[s._v("store")]),s._v("实例，并且必须手动将该模块注册到根存储模块")]),a("p",[a("code",[s._v("Using the decorators with ServerSideRender")])]),a("p",[a("code",[s._v("When SSR is involved the store is recreated on each request. Every time the module is accessed using getModule function the current store instance must be provided and the module must be manually registered to the root store modules")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// store/modules/MyStoreModule.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'modules/MyStoreModule'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("namespaced")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("stateFactory")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n})\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyStoreModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  public "),a("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": string = "),a("span",{staticClass:"hljs-string"},[s._v("'initial'")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  public "),a("span",{staticClass:"hljs-title function_"},[s._v("setTest")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("val: string")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("test")]),s._v(" = val\n  }\n}\n\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// store/index.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyStoreModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store/modules/MyStoreModule'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("createStore")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n    "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n      "),a("span",{staticClass:"hljs-title class_"},[s._v("MyStoreModule")]),s._v(",\n    }\n  })\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// components/Random.tsx")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Component")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Vue")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vue-property-decorator'")]),s._v(";\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { getModule } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v(";\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyStoreModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store/modules/MyStoreModule'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Component")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vue")]),s._v(" {\n    public "),a("span",{staticClass:"hljs-title function_"},[s._v("created")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModuleInstance")]),s._v(" = "),a("span",{staticClass:"hljs-title function_"},[s._v("getModule")]),s._v("("),a("span",{staticClass:"hljs-title class_"},[s._v("MyStoreModule")]),s._v(", "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("$store")]),s._v(");\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// Do stuff with module")]),s._v("\n        "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModuleInstance")]),s._v("."),a("span",{staticClass:"hljs-title function_"},[s._v("setTest")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'random'")]),s._v(")\n    }\n}\n")])]),a("p",[s._v("配置")]),a("p",[s._v("有一个全局配置对象，可以用来设置整个模块的选项:")]),a("p",[a("code",[s._v("Configuration")])]),a("p",[a("code",[s._v("There is a global configuration object that can be used to set options across the whole module:")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { config } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("// Set rawError to true by default on all @Action decorators")]),s._v("\nconfig."),a("span",{staticClass:"hljs-property"},[s._v("rawError")]),s._v(" = "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("//在所有@Action装饰器上默认设置rawError为true")]),s._v("\n")])]),a("p",[s._v("使用这个库，您可以编写"),a("code",[s._v("vuex")]),s._v("这种格式的模块 -")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// eg. /app/store/posts.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { get } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'axios'")]),s._v("\n\ninterface "),a("span",{staticClass:"hljs-title class_"},[s._v("PostEntity")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("comments")]),s._v(": string[]\n}\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Posts")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("posts")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("PostEntity")]),s._v("[] = [] "),a("span",{staticClass:"hljs-comment"},[s._v("// initialize empty for now")]),s._v("\n\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("totalComments")]),s._v("(): number {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v("\n      ."),a("span",{staticClass:"hljs-title function_"},[s._v("filter")]),s._v("("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("post")]),s._v(" =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// Take those posts that have comments")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v(" && post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("length")]),s._v("\n      })\n      ."),a("span",{staticClass:"hljs-title function_"},[s._v("reduce")]),s._v("("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("sum, post")]),s._v(") =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// Sum all the lengths of comments arrays")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" sum + post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("length")]),s._v("\n      }, "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n  }\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("updatePosts")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("posts: PostEntity[]")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v(" = posts\n  }\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("commit")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'updatePosts'")]),s._v(" })\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("fetchPosts")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'https://jsonplaceholder.typicode.com/posts'")]),s._v(")\n  }\n}\n")])]),a("p",[s._v("结果"),a("code",[s._v("/app/store/posts")]),s._v("文件输出将是")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// equivalent eg. /app/store/posts.js")]),s._v("\n"),a("span",{staticClass:"hljs-variable language_"},[s._v("module")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("exports")]),s._v(" = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("posts")]),s._v(": []\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("getters")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("totalComments")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state")]),s._v(") =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" state."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v("\n        ."),a("span",{staticClass:"hljs-title function_"},[s._v("filter")]),s._v("("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("post")]),s._v(") =>")]),s._v(" {\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v(" && post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("length")]),s._v("\n        })\n        ."),a("span",{staticClass:"hljs-title function_"},[s._v("reduce")]),s._v("("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("sum, post")]),s._v(") =>")]),s._v(" {\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" sum + post."),a("span",{staticClass:"hljs-property"},[s._v("comments")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("length")]),s._v("\n        }, "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(")\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("updatePosts")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state, posts")]),s._v(") =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-comment"},[s._v("// 'posts' is payload")]),s._v("\n      state."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v(" = posts\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("actions")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("fetchPosts")]),s._v(": "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" (context) => {\n      "),a("span",{staticClass:"hljs-comment"},[s._v("// the return of the function is passed as payload")]),s._v("\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" payload = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'https://jsonplaceholder.typicode.com/posts'")]),s._v(")\n      "),a("span",{staticClass:"hljs-comment"},[s._v("// the value of 'commit' in decorator is the mutation used")]),s._v("\n      context."),a("span",{staticClass:"hljs-title function_"},[s._v("commit")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'updatePosts'")]),s._v(", payload)\n    }\n  }\n}\n")])]),a("h2",[s._v("类型安全的好处")]),a("p",[s._v("而不是使用通常的方式来调度和提交"),a("code",[s._v("......")])]),a("pre",{staticClass:"hljs"},[a("code",[s._v("store."),a("span",{staticClass:"hljs-title function_"},[s._v("commit")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'updatePosts'")]),s._v(", posts)\n"),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" store."),a("span",{staticClass:"hljs-title function_"},[s._v("dispatch")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'fetchPosts'")]),s._v(")\n")])]),a("p",[a("code",[s._v("......")]),s._v("这不提供类型安全的有效载荷和在IDE中没有自动完成的帮助，您现在可以使用更多的使用类型安全的机制"),a("code",[s._v("getModule")]),s._v("访问")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { getModule } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Posts")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("`~/store/posts.js`")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" postsModule = "),a("span",{staticClass:"hljs-title function_"},[s._v("getModule")]),s._v("("),a("span",{staticClass:"hljs-title class_"},[s._v("Posts")]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// access posts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" posts = postsModule."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// use getters")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" commentCount = postsModule."),a("span",{staticClass:"hljs-property"},[s._v("totalComments")]),s._v("\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// commit mutation")]),s._v("\npostsModule."),a("span",{staticClass:"hljs-title function_"},[s._v("updatePosts")]),s._v("(newPostsArray)\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// dispatch action")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" postsModule."),a("span",{staticClass:"hljs-title function_"},[s._v("fetchPosts")]),s._v("()\n")])]),a("h2",[s._v("定义一个模块")]),a("p",[s._v("要定义一个模块，请创建一个从装饰器扩展"),a("code",[s._v("VuexModule")]),s._v(" 并且必须用"),a("code",[s._v("Module")]),s._v("装饰器装饰的类")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// eg. /app/store/mymodule.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("someField")]),s._v(": string = "),a("span",{staticClass:"hljs-string"},[s._v("'somedata'")]),s._v("\n}\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("小心")]),a("p",[s._v("包中也有一个"),a("code",[s._v("Module")]),s._v("类"),a("code",[s._v("vuex")]),s._v("，它不是装饰器。确保从 from 导入正确的模块装饰器 "),a("code",[s._v("vuex-module-decorators")])]),a("p",[s._v("❌ "),a("code",[s._v("import {Module} from 'vuex'")]),s._v(" ✔️ "),a("code",[s._v("import {Module} from 'vuex-module-decorators'")])])]),a("h2",[s._v("store使用")]),a("p",[s._v("您将"),a("code",[s._v("MyModule")]),s._v("类本身用作模块。")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store/mymodule'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("myMod")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v("\n  }\n})\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("我们使用 "),a("code",[s._v("MyModule")]),s._v(" 类的方式不同于经典的面向对象编程，类似于"),a("code",[s._v("vue-class-component")]),s._v(" 的工作方式。我们使用类本身作为模块，而不是类构造的对象")]),a("p",[a("code",[s._v("new MyModule()")]),s._v(" ❌")])]),a("h2",[s._v("访问状态")]),a("p",[s._v("访问模块的所有常用方法都有效 -")]),a("ol",[a("li")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" store "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'~/store'")]),s._v("\n\nstore."),a("span",{staticClass:"hljs-property"},[s._v("state")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("myMod")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("someField")]),s._v("\n")])]),a("ol",{attrs:{start:"2"}},[a("li")]),a("p",[a("code",[s._v("this.$store")]),s._v("在组件中使用"),a("code",[s._v("if")])]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("$store")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("state")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("myMod")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("someField")]),s._v("\n")])]),a("p",[s._v("除此之外，对于更类型安全的访问，我们可以使用 "),a("code",[s._v("getModule()")])]),a("p",[s._v("使用"),a("code",[s._v("getModule()")]),s._v("创建类型安全的访问")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", getModule } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" store "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@/store'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("dynamic")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", store, "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mymod'")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("someField")]),s._v(": number = "),a("span",{staticClass:"hljs-number"},[s._v("10")]),s._v("\n}\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" myMod = "),a("span",{staticClass:"hljs-title function_"},[s._v("getModule")]),s._v("("),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(")\nmyMod."),a("span",{staticClass:"hljs-property"},[s._v("someField")]),s._v(" "),a("span",{staticClass:"hljs-comment"},[s._v("//works")]),s._v("\nmyMod."),a("span",{staticClass:"hljs-property"},[s._v("someOtherField")]),s._v(" "),a("span",{staticClass:"hljs-comment"},[s._v("//Typescript will error, as field doesn't exist")]),s._v("\n")])]),a("h2",[s._v("状态")]),a("p",[s._v("类的所有属性都转换为状态道具。例如，以下代码 -")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vehicle")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n}\n")])]),a("p",[s._v("相当于这个——")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n")])]),a("div",{staticClass:"warning"},[a("p",[s._v("🚨 警告")]),a("p",[s._v("如果无法确定状态值，则必须使用"),a("code",[s._v("null.")]),s._v(" 就像"),a("code",[s._v("wheels: number | null = null.")])])]),a("h2",[s._v("类的所有 "),a("code",[s._v("ES6 getter")]),s._v(" 函数都转换为 "),a("code",[s._v("vuex getter")])]),a("p",[s._v("例如，以下代码 -")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vehicle")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("axles")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n")])]),a("p",[s._v("相当于这个——")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("getters")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("axles")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state")]),s._v(") =>")]),s._v(" state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n")])]),a("p",[s._v("对于 "),a("code",[s._v("Method-Style Access")]),s._v(" 使用 "),a("code",[s._v("vanilla vuex")]),s._v(" 并返回一个函数：")]),a("pre",{staticClass:"hljs"},[a("code",[s._v("@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vehicle")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  companies = []\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("company")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("companyName: string")]),s._v(") =>")]),s._v(" { "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("companies")]),s._v("."),a("span",{staticClass:"hljs-title function_"},[s._v("find")]),s._v("("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("company")]),s._v(" =>")]),s._v(" company."),a("span",{staticClass:"hljs-property"},[s._v("name")]),s._v(" === companyName) };\n  }\n}\n")])]),a("h2",[a("code",[s._v("@Mutation")])]),a("p",[s._v("修饰的所有函数"),a("code",[s._v("@Mutation")]),s._v("都转换成"),a("code",[s._v("Vuex")]),s._v("的"),a("code",[s._v("mutations")]),s._v(" 例如下面的代码——")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vehicle")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("puncture")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("n: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" = "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" - n\n  }\n}\n")])]),a("p",[s._v("相当于这个——")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("puncture")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state, payload")]),s._v(") =>")]),s._v(" {\n      state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" = state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" - payload\n    }\n  }\n}\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("一旦用"),a("code",[s._v("@Mutation")]),s._v("装饰器装饰"),a("code",[s._v("Mutations")]),s._v("运行时会将此（上下文）设置为"),a("code",[s._v("state")]),s._v(" 所以当你想改变 "),a("code",[s._v("state")]),s._v(" 中的东西时， "),a("code",[s._v("state.item++")]),s._v("很简单"),a("code",[s._v("this.item++")])])]),a("div",{staticClass:"warning"},[a("p",[s._v("🚨 警告")]),a("p",[s._v("变异函数不能是异步函数。也不要将它们定义为箭头➡️功能，因为我们需要在运行时重新绑定他们。")])]),a("h2",[a("code",[s._v("@Action")])]),a("p",[s._v("所有装饰的函数"),a("code",[s._v("@Action")]),s._v("都转换为 "),a("code",[s._v("vuex")]),s._v(" 动作。")]),a("p",[s._v("例如这个代码 -")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v(" } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { get } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'request'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vehicle")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("addWheel")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("n: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" = "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" + n\n  }\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("fetchNewWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("wheelStore: string")]),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" wheels = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("(wheelStore)\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("context")]),s._v("."),a("span",{staticClass:"hljs-title function_"},[s._v("commit")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'addWheel'")]),s._v(", wheels)\n  }\n}\n")])]),a("p",[s._v("相当于这个——")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" request = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'request'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("wheels")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("addWheel")]),s._v(": "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("state, payload")]),s._v(") =>")]),s._v(" {\n      state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" = state."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" + payload\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("actions")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("fetchNewWheels")]),s._v(": "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" (context, payload) => {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" wheels = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" request."),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("(payload)\n      context."),a("span",{staticClass:"hljs-title function_"},[s._v("commit")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'addWheel'")]),s._v(", wheels)\n    }\n  }\n}\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("一旦用"),a("code",[s._v("@Action")]),s._v("函数装饰，将调用"),a("code",[s._v("this")]),s._v(" 具有以下形状 -"),a("code",[s._v("{...[all fields of state], context}")]),s._v(" 动作有效负载作为参数出现。因此，要从动作的主体内手动提交突变，只需调用"),a("code",[s._v("this.context.commit('mutationName', mutPayload)")])])]),a("div",{staticClass:"warning"},[a("p",[s._v("🚨️️ 警告")]),a("p",[s._v("如果您在 "),a("code",[s._v("action")]),s._v(" 中执行长时间运行的任务，建议将其定义为异步函数。但即使你不这样做，这个库也会将你的函数包装成一个"),a("code",[s._v("Promise")]),s._v("并等待它。")]),a("p",[s._v("如果您希望某事实际同步发生，请将其"),a("code",[s._v("Mutation")]),s._v("改为")]),a("p",[s._v("也不要将它们定义为箭头➡️功能，因为我们需要在运行时重新绑定他们。")])]),a("h2",[a("code",[s._v("@MutationAction")])]),a("p",[s._v("如果您了解"),a("code",[s._v("Actions")]),s._v("和"),a("code",[s._v("Mutations")]),s._v(" 的工作原理，您可能对某些功能有以下要求 -")]),a("p",[s._v("先做一个异步动作")]),a("p",[s._v("然后通过突变将结果值提交到store")]),a("p",[s._v("这就是 "),a("code",[s._v("@MutationAction")]),s._v("出现的地方。")]),a("p",[s._v("这是一个基本的例子")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" {"),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("MutationAction")]),s._v("} "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v(" \n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("TypicodeModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("posts")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("Post")]),s._v("[] = [] \n  "),a("span",{staticClass:"hljs-attr"},[s._v("users")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("User")]),s._v("[] = [] \n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("MutationAction")]),s._v(" \n  "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("updatePosts")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" posts = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" axios."),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'https://jsonplaceholder.typicode.com/posts'")]),s._v(")\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" { posts }\n  }\n}\n")])]),a("p",[s._v("这被转换成这样的东西")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" typicodeModule = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("state")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("posts")]),s._v(": [],\n    "),a("span",{staticClass:"hljs-attr"},[s._v("users")]),s._v(": []\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("mutations")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("updatePosts")]),s._v(": "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("state, posts")]),s._v(") {\n      state."),a("span",{staticClass:"hljs-property"},[s._v("posts")]),s._v(" = posts\n    }\n  },\n  "),a("span",{staticClass:"hljs-attr"},[s._v("actions")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("updatePosts")]),s._v(": "),a("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("context")]),s._v(") {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" posts = "),a("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" axios."),a("span",{staticClass:"hljs-title function_"},[s._v("get")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'https://jsonplaceholder.typicode.com/posts'")]),s._v(")\n      context."),a("span",{staticClass:"hljs-title function_"},[s._v("commit")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'updatePosts'")]),s._v(", posts)\n    }\n  }\n}\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("请注意，如果"),a("code",[s._v("S")]),s._v("表示"),a("code",[s._v("state")]),s._v("的类型，那么从"),a("code",[s._v("MutationAction")]),s._v("函数返回的对象 必须是"),a("code",[s._v("Partial<S>")]),s._v(" 返回值中存在的键（例如，"),a("code",[s._v("here posts")]),s._v("）被替换到存储中。")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("当"),a("code",[s._v("MutationAction")]),s._v("函数返回时"),a("code",[s._v("undefined")]),s._v("，"),a("code",[s._v("MutationAction")]),s._v("不会调用的变异部分， 状态保持不变。")])]),a("h2",[s._v("命名空间模块")]),a("p",[s._v("如果你打算以命名空间的方式使用你的模块，那么你需要在"),a("code",[s._v("@Module")]),s._v("装饰器中指定。")]),a("pre",{staticClass:"hljs"},[a("code",[s._v("@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("namespaced")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("incrWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("extra: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" += extra\n  }\n\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("axles")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("mm")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v("\n  }\n})\n")])]),a("div",{staticClass:"warning"},[a("p",[s._v("笔记")]),a("p",[a("code",[s._v("name")]),s._v("装饰器中的字段应与您在创建"),a("code",[s._v("store")]),s._v("时将分配给模块的实际名称相匹配。")]),a("p",[s._v("手动保持这两个相同并不是很优雅，但这很重要。我们必须将"),a("code",[s._v("this.store.dispatch('action')")]),s._v(" 调用转换为"),a("code",[s._v("this.store.dispatch('name/action')")]),s._v("，并且我们需要 "),a("code",[s._v("name")]),s._v("在装饰器中正确才能使其工作")])]),a("h2",[s._v("在命名空间模块中注册全局操作")]),a("p",[s._v("为了"),a("strong",[s._v("全局注册命名空间模块的操作")]),s._v("，您可以"),a("code",[s._v("root: true")]),s._v("向"),a("code",[s._v("@Action")]),s._v("和"),a("code",[s._v("@MutationAction")]),s._v("装饰方法添加参数。")]),a("pre",{staticClass:"hljs"},[a("code",[s._v("@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("namespaced")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v(" })\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  wheels = "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Mutation")]),s._v("\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("setWheels")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("wheels: number")]),s._v(") {\n    "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" = wheels\n  }\n  \n  @"),a("span",{staticClass:"hljs-title class_"},[s._v("Action")]),s._v("({ "),a("span",{staticClass:"hljs-attr"},[s._v("root")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", "),a("span",{staticClass:"hljs-attr"},[s._v("commit")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'setWheels'")]),s._v(" })\n  "),a("span",{staticClass:"hljs-title function_"},[s._v("clear")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("\n  }\n\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("get")]),s._v(" "),a("span",{staticClass:"hljs-title function_"},[s._v("axles")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-variable language_"},[s._v("this")]),s._v("."),a("span",{staticClass:"hljs-property"},[s._v("wheels")]),s._v(" / "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("modules")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("mm")]),s._v(": "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v("\n  }\n})\n")])]),a("p",[s._v("这样虽然在命名空间模块中，但将通过调度调用"),a("code",[s._v("@Action clear of")]),s._v(" 。同样的事情只需传递给装饰器选项即可。"),a("code",[s._v("MyModuleclearmm@MutationAction{ root: true }")])]),a("div",{staticClass:"warning"},[a("p",[s._v("笔记")]),a("p",[s._v("当全局注册一个动作时，它不能被命名空间的名称调用。例如，这意味着不能通过调度调用操作"),a("code",[s._v("mm/clear！")])])]),a("h2",[s._v("动态模块")]),a("p",[s._v("模块可以简单地通过向"),a("code",[s._v("@Module")]),s._v("装饰器传递一些属性来动态注册，但该过程的一个重要部分是，我们首先创建"),a("code",[s._v("store")]),s._v("，然后将"),a("code",[s._v("store")]),s._v("传递给模块。")]),a("h3",[s._v("第 1 步：创建store")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// @/store/index.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" store = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("Vuex")]),s._v("."),a("span",{staticClass:"hljs-title class_"},[s._v("Store")]),s._v("({\n  "),a("span",{staticClass:"hljs-comment"},[s._v("/*\n  Ideally if all your modules are dynamic\n  then your store is registered initially\n  as a completely empty object\n  */")]),s._v("\n})\n")])]),a("h3",[s._v("步骤 2：创建动态模块")]),a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// @/store/modules/MyModule.ts")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" store "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'@/store'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" {"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v(", "),a("span",{staticClass:"hljs-title class_"},[s._v("VuexModule")]),s._v("} "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vuex-module-decorators'")]),s._v("\n\n@"),a("span",{staticClass:"hljs-title class_"},[s._v("Module")]),s._v("({"),a("span",{staticClass:"hljs-attr"},[s._v("dynamic")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(", store, "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'mm'")]),s._v("})\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title class_"},[s._v("MyModule")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),a("span",{staticClass:"hljs-title class_ inherited__"},[s._v("VuexModule")]),s._v(" {\n  "),a("span",{staticClass:"hljs-comment"},[s._v("/*\n  Your module definition as usual\n  */")]),s._v("\n}\n")])]),a("div",{staticClass:"tip"},[a("p",[s._v("笔记")]),a("p",[s._v("截至目前，我们不支持动态 + 嵌套模块。")])]),a("div",{staticClass:"warning"},[a("p",[s._v("重要事项⛔️")]),a("p",[s._v("确保您的导入/要求以在创建模块类之前执行存储定义的方式排序。")]),a("p",[s._v("store 的存在很重要，并且传递给 @Module装饰器以便模块动态注册")])])])}],_={name:"vc-component-doc",components:{},data:function(){return{}}},n=_,v=a("2877"),i=Object(v["a"])(n,l,e,!1,null,null,null);t["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d0dd42b.7ae1d215.js.map